<!DOCTYPE html>
<html>
  
  <head>    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>GoalBarClub - Simple Shot</title>
    <!-- <link rel="shortcut icon" href="favicon.ico"> -->
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
   
<style>
.red {
	background-color: #ff0000;
}
.yellow {
	background-color: #ffff00;
}
.green {
	background-color: #00ff00;
}
</style>
  </head>
  
  <body>
    
    <div class="container-fluid">
      
      
      <ul class="nav nav-tabs" id="myTab" role="tablist">

        <li class="nav-item">
	  <a href="https://www.goalbarclub.org/" target="_blank">
            <img src="res/goalbar_logo.jpg" height=0px width="10px" />
	  </a>
        </li>
        <li class="nav-item">
	  <a href="https://www.goalbarclub.org/" target="_blank">
            <img src="res/goalbar_logo.jpg" width="27px" />
	  </a>
        </li>
        <li class="nav-item">
	  <a href="https://www.goalbarclub.org/" target="_blank">
            <img src="res/goalbar_logo.jpg" height=0px width="20px" />
	  </a>
        </li>

	
        <li class="nav-item">
          <a class="nav-link active" id="games-tab" data-toggle="tab" href="#games" role="tab" aria-controls="games" aria-selected="true">Games</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="howto-tab" data-toggle="tab" href="#howto" role="tab" aria-controls="howto" aria-selected="false">How To Play</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="faq-tab" data-toggle="tab" href="#faq" role="tab" aria-controls="faq" aria-selected="false">FAQs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="about-tab" data-toggle="tab" href="#about" role="tab" aria-controls="about" aria-selected="false">Links</a>
        </li>
	<li class="nav-item">
          <a class="nav-link" href="https://t.me/goalbarclub" target="_blank">Telegram</a>
        </li>
	
      </ul>
       
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="games" role="tabpanel" aria-labelledby="games-tab" style="background-color:#f0efef;">
          <nav class="navbar navbar-dark" style="background-color:#bccad6;" >
	    <div class="btn-group" role="group">
	      <a type="button" class="btn btn-info" href="javascript:initGameList()">Refresh</a>
	      <a type="button" id="btnLogout" style="display:none;" class="btn btn-info" href="javascript:appLogout()">Logout</a>
	    </div>
	    <span  id="balance" class="text-right" style="display:none;background-color:#e9ecefee;"><span id="mybalance"></span></span>
	  </nav><br/>

	  <div class="modal fade bd-example-modal-lg" role="dialog" id="msg">
	    <div class="modal-dialog modal-lg">
	      <div class="modal-content">
		<div class="modal-header">
		  <h5 class="modal-title">Alert!</h5>
		  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		    <span aria-hidden="true">&times;</span>
		  </button>
		</div>
		<div class="modal-body" id="msgContent">
		  <p>Modal body text goes here.</p>
		</div>
		<div class="modal-footer">
		  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		</div>
	      </div>
	    </div>
	  </div>	  

	  
          <!-- Login -->
          <div class="row"  id="divlogin">
            <div class="col-10 offset-1">
              <div class="jumbotron" style="background-color:#e9ecefee;">
                <center><a class="btn btn-primary btn-lg" href="javascript:location.reload();" role="button">Login with Scatter</a></center>
              </div>
            </div>
          </div>

	  
          <h3  id="balance" class="text-right" style="display:none;background-color:#e9ecefee;">My Balance: <span id="mybalance">0.0000 EOS</span></h3>
	  
          <!-- Claim regawards -->
          <div class="row" id="divclaim" style="display:none;">
            <div class="col-10 offset-1">
              <div class="jumbotron" style=" style="background-color:#e9ecefee;">
                <h3>Balance to claim: <span id="toclaim">2.0000 EOS</span></h3>
                <center><a class="btn btn-primary btn-lg" href="javascript:claim();" role="button">Claim</a></center>
              </div>
            </div>
          </div>
	  
          <!-- Open games regawards -->
          <div class="row">
            <div class="col-12">
              <h3 class="text-center" style="background-color:#e9ecefee;">Games to bet</h3>
              <!-- <div class="row" id="sortcontrols">
                 <div class="col-1 offset-7">Sort:</div>
                 <div class="col-3">
                    <select class="form-control">
                       <option>Status</option>
                       <option>T1</option>
                       <option>T2</option>
                    </select>
                 </div>
              </div> -->
              <div class="row" id="listgames" style="min-height: 800px;">
              </div>
            </div>
          </div>
        </div>
	
	
	
        <div class="tab-pane fade" id="howto" role="tabpanel" aria-labelledby="howto-tab">
          <h3>How it works</h3>
	  
          <h4>Simple game to guess score rules</h4>
	  
          <ul>
            <li>Players can pick a game and define the amount of EOS to be waged.</li>
            <li>An exact score of a match is the condition to win the bet. If the results of the game match with the bet, the player earns a payoff.</li>
	    <li>Given a game, a player cannot make more than one bet per game.</li>
            <li>The player transfers the amount waged from his/her account to the EOS contract account.</li>
            <li>The system accepts bets for each game up to a few minutes before the start time.</li>
            <li>From the total amount received, a fee of up to 5% will be deducted to cover the operational costs.</li>
            <li>The total payout is distributed to the winners proportionally to the amount waged.</li>
            <li>Winning players can redeem their prize directly in the application. The game contract transfers the payouts from the game account to each user.</li>            
	    <li>When there are no winners the total bets will return to the pot for use in another match in the future.</li>
	    <li>To check the game statistics click on the <strong>Stats</strong> button</li>
            <li>All these steps are recorded in the blockchain and will be there forever as a public record.</li>
          </ul>
	  
          <h4>Sample game calculations</h4>
	  
          <p><b>The game:</b> Game China 1x1 Japan Fee = 5%</p>
	  
          <h5>The Players actions:</h5>
          <ul>
            <li><b>John:</b> bets  50 EOS on score 1x0</li>
            <li><b>Tony:</b> bets  90 EOS on score 1x2</li>
            <li><b>Mike:</b> bets  40 EOS on score 1x1 (winner)</li>
            <li><b>Jane:</b> bets  60 EOS on score 1x1 (winner)</li>
          </ul>
	  
          <h5><b>Amount collected:</b> 240 EOS</h5>
	  
          <h5><b>5% Fees:</b> 12 EOS</h5>
	  
          <h5><b>Total Payout:</b> 228 EOS</h5>
	  
          <h5><b>Winner total amount:</b> 100 EOS from Mike (40) and Jane(60)</h5>
	  
          <h5>Payout by player:</h5>
          <ul>
            <li>Mike receives  (40 * 228) / 100  = 91.2000 EOS</li>
            <li>Jane receives  (60 * 228) / 100  = 136.8000 EOS</li>
          </ul>
	  
        </div>
	
        <div class="tab-pane fade" id="faq" role="tabpanel" aria-labelledby="faq-tab">


          <h3>FAQ</h3>

	  <h4>What is the GoalBarBetting Club Simple Game Score (SGS)?</h4>
	  <p>The GoalBarBetting Club is just our EOS development roadmap first step. It represents the first of a series of cryptocurrency betting applications that are simple and easy to understand. </p>
	  <p>It is not for game professionals, it is for fun and earn some money. If our community grows, it could mean real money ! :-)</p>
	  <p>In this first phase we charge a 5% fee used to cover operational costs, including developers, designers and also to buy EOS RAM/CPU. We will launch another economic model, based on autonomous community (DAC) with the GOAL token, very soon. </p>

	  <h4>What do I need to play with the GoalBarBetting SGS?</h4>

	  <p>At this point, all you need is have the “scatter” wallet configured in your browser. We are developing mobile applications for Android and iPhone (IOs).<p>
	  <p>Also, we are working on integrations with exchanges and other wallets.</p>
	  <p>Check our <a href="" target="_blank">Telegram channel</a> for finding more information about new partners.</p>
	  
	  <h4>What happens when nobody wins a betting game?</h4>
	  
	  <p>We have a pot with money that always guarantees the best prizes to the users. For each game a minimum prize is to be divided by the winners, even if the total bets in the game are less than this guaranteed prize.</p>
	  
	  <p>When there are no winners the total bets will return to the pot for use in another match in the future. Goalbarclub will keep a report to facilitate the auditing of the prizes.</p>
	  
	  <h4>Which tokens will GoalBarBetting SGS accept for betting?</h4>
	  
	  <p>At this point, we only accept EOS. In the future, we plan to accept our utility token GOAL.</p>
	  
	  <h4>Is there an Oracle that provides the result of the games?</h4>
	  
	  <p>Included in the operating costs are the efforts to create automated and semi-automated ways to update the “Oracle” with the results of each game.<p>
	  <p>Check our <a href="https://steemit.com/@goalbarclub" target="_blank">steemit blog</a> for updates.</p>
	  
	  <h4>Who chooses the games available for betting in the SGC?</h4>
	  
	  <p>The goalbarclub team will initially select games based on their relevance on international championships. </p>
	  <p>We are always open for suggestions about new games. Also, we are looking for partners to act as promoters of games in different countries.</p>
	  <p>Please check out our <a href="" target="_blank">website</a> and <a href="https://t.me/goalbarclub" target="_blank">telegram channel</a> for more details when available.</p> 
	  
	  <h4>What happens when nobody wins a betting game?</h4>
	  
	  <p>We have a pot with money that always guarantees the best prizes to the users. For each game a minimum prize is to be divided by the winners, even if the total bets in the game are less than this guaranteed prize.</p>
	  <p>When there are no winners the total bets will return to the pot for use in another match in the future. Goalbarclub will keep a report to facilitate the auditing of the prizes.</p>
	  
        </div>
	
        <div class="tab-pane fade" id="about" role="tabpanel" aria-labelledby="about-tab">
	  
	  
          <div class="list-group">
            <a href="javascript:openLink('https://twitter.com/goalbarclub', '_blank')" class="list-group-item list-group-item-action"><i class="fab fa-twitter"></i> Twitter</a>
            <a href="javascript:openLink('https://t.me/goalbarclub', '_blank')" class="list-group-item list-group-item-action"><i class="fab fa-telegram-plane"></i> Telegram</a>
            <a href="javascript:openLink('https://github.com/goalbarclub', '_blank')" class="list-group-item list-group-item-action"><i class="fab fa-github-alt"></i> Github</a>
            <a href="javascript:openLink('https://eosflare.io/account/ctgbarbeting', '_blank')" class="list-group-item list-group-item-action disabled"><i class="far fa-user-circle"></i>  Check account</a>
          </div>	  
	  
        </div>
      </div>
      
    </div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/eosjs@16.0.0/lib/eos.min.js" integrity="sha512-vNyLnOEb7uFmEtVbLnyZQ9/k4zckM2Vu3jJOKq6XfWEVZG0yKcjDExVN4EQ7e3F+rePWRncMolI2xFi/3qo62A==" crossorigin="anonymous"></script>
    <script src="eosmsg.js"></script>
    <script src="lib/scatter/scatter.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-127373636-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-127373636-1');
</script>

    
  </body>
  
  <script>
    var contract_account = "ctgbarbeting";
    var app_name = "simpleshot";
    var current_account = null;

    $(document).ready(function() {
	initGameList();

        if(window.scatter == null) {
           $("#msgContent").html("Scatter not found!!");
           $("#msg").modal();
        }

	initAdapter(app_name);
    });

    function showLogged() {
        $("#divlogin").hide();
        $("#balance").show();
        $(".btn-bet").show();
        $("#btnLogout").show();

	getCurrentAccount().then(p => {
	    current_account = p;
	    initGameList();
	});
    }
    
    function showLogout() {
	$("#divlogin").show();
	$("#balance").hide();
	$(".btn-bet").hide();
	$("#btnLogout").hide();
	$("#divclaim").hide();

	current_account = null;
    }

    document.addEventListener('userLogin', res => {
       showLogged();
    });

    document.addEventListener('userLogout', res => {
       showLogout();
    });

    document.addEventListener('AdapterLoaded', res => {
	console.log("Adapter loaded");
        console.log(res);
    });

    document.addEventListener('AdapterLoadFailed', res => {
	console.log("Adapter loaded failed");
        console.log(res);
	current_account = null;
    });

    async function appLogin() {
	EOSLogin();
	getCurrentAccount().then(p => {
	    current_account = p;
	});
    }

    function appLogout() {
	EOSLogout().then(res => {
	    current_account = null;
	    initGameList();
	});
    }

    //// EOS ////////////
    var {
	format,
	api,
	ecc,
	json,
	Fcbuffer
    } = Eos.modules;
    
    eosconfig = {
	httpEndpoint: getEOSHttpEndpoint(),
	chainId:  getEOSChainID(),
	broadcast: true,
	verbose: false,
    };
    
    eos = Eos(eosconfig);

    function getGameHeaderColor(d) {
	var now = new Date().getTime();
	var dt = new Date(d);

	if (dt < now) {
	    return "red";
	}

	if ((dt - now) < 24 * 3600 * 1000 ) {
	    return "yellow";
	}
	
	return "green";
    }

    function getGameStatus(d) {
	var now = new Date().getTime();
	var dt = new Date(d);

	if (dt < now) {
	    return "st-closed";
	}
	
	return "st-open";
    }

    function team2logo(team) {
       var teams = {
          // Brazil
          "Atlético-MG" : "https://www.resultados.com/res/image/data/WbSJHDh5-lWKKdTEe.png",
          "Chapecoense" : "https://www.resultados.com/res/image/data/v9EKoUeM-t25AHKOe.png",
          "Cruzeiro"    : "https://www.resultados.com/res/image/data/QDS2MvBr-0rn95JMc.png",
          "Vasco"       : "https://www.resultados.com/res/image/data/nX0WxQg5-ptTI6fcH.png",
          "Corinthians" : "https://www.resultados.com/res/image/data/jgHv8MEa-OWRM5ECN.png",
          "Santos"      : "https://www.resultados.com/res/image/data/rJGaKUhl-2NQQ4YRT.png",

         //Countries
         "Germany"      : "https://www.resultados.com/res/image/data/zP226aXg-02AFhOqC.png",
         "Netherlands"  : "https://www.resultados.com/res/image/data/bieizLjl-neUmUb9G.png", 

         //LaLiga
	 "Barcelona"    : "https://www.resultados.com/res/image/data/8dhw5vxS-trs0hqL9.png",
         "Real Madrid"  : "https://www.resultados.com/res/image/data/A7kHoxZA-2irdgP53.png",

         //English
         "Manchester Utd"  : "https://www.resultados.com/res/image/data/nwSRlyWg-rBodzytr.png",

         //Serie A
         "Juventus"              : "https://www.resultados.com/res/image/data/MybdvNGG-ja9Wx4TE.png",
         "Internazionale Milano" : "https://www.resultados.com/res/image/data/888s5CCa-0IrgnKLD.png",
         "Inter"                 : "https://www.resultados.com/res/image/data/888s5CCa-0IrgnKLD.png",
         "Napoli"                : "https://www.resultados.com/res/image/data/lhPsgJWg-zyNNicC8.png",

         //France
         "PSG"  : "https://www.resultados.com/res/image/data/EskJufg5-lIDJVsTo.png",

       };

       if (team in teams)
          return teams[team]; 
       else 
          return "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTFgGXzx5JysBWLDoc-3g_EWdx7eEotkoC5KjUxGha-zrvVy0lAoQ";
    }

    function initGameList() {
	eos.getTableRows({
	    "json": true,
	    "scope": contract_account,
	    "code": contract_account,
	    "table": "game",
	    "limit": 100,
	}).then(result => {
	    console.log(result);
	    $("#listgames").html("");

	    for (var i in result.rows) {
		var g = result.rows[i];
		var Min = g.value_min.substring(0, g.value_min.length - 3) * 10000;
		var Max = g.value_max.substring(0, g.value_max.length - 3) * 10000;
		var Step = (Max - Min) / 20;
                
		$("#listgames").append("<div class='col-10 offset-1'><div class='card text-center' style='margin: 30px; background-color: #fffe;'>" +
				       "   <div class='card-header " + getGameHeaderColor(g.bet_until) + "'>" +
				       "      " + g.description + 
				       "   </div> "+
				       "   <div class='card-body'>"+
				       "      <h5 class='card-title'><img src='" + team2logo(g.team1) + "'/> "+g.team1+ " X " + g.team2 + " <img src='" + team2logo(g.team2) + "'/></h5>" +
				       " <div id='tobet" + g.id + "'>"+
                                       " <p class='card-text' ><span id='rewards" + g.id + "'></span>" +
				       " <p class='card-text " + getGameStatus(g.bet_until) + "'><b>Min:</b> " + g.value_min + " <b>Max:</b> " + g.value_max + "</p>"+

				       " <div class='row  " + getGameStatus(g.bet_until) + 
			               "'><input type='range' class='custom-range col-md-8 offset-md-2' min='" + Min +"' max='" + Max+ "' step='" + Step + "' id='amount" + g.id + "' value='" + Min + "'" +
				       " onchange='var v = $(\"\#amount\" + " + g.id + ").val(); $(\"\#valbet\" + " + g.id + ").html(v/10000); " +
				       "'> "+
				       " <label for='amount"+ i +"'>Amount: <span id='valbet" + g.id + "'>" + Min / 10000 + "</span> EOS</label></div>"+
				       
				       " <p class='" + getGameStatus(g.bet_until) + "'> "+ g.team1 + 
                                       "   <select id='oscore" + g.id + "'><option value='0'>0</option><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option><option value='7'>7</option><option value='8'>8</option><option value='9'>9</option><option value='10'>10</option></select> X " +
                                       "   <select id='tscore" + g.id + "'><option value='0'>0</option><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option><option value='7'>7</option><option value='8'>8</option><option value='9'>9</option><option value='10'>10</option></select>" + g.team2 + "</p>" +
				       
				       "<a class='btn btn-primary btn-lg btn-bet " + getGameStatus(g.bet_until) + "' href='javascript:bet(" + g.id + ");' role='button' style='display:none;'><i class='fas fa-trophy'></i> Bet</a> " +
				       "<a class='btn btn-info btn-lg' href='javascript:showStats(" + g.id + ");' role='button'><i class='fas fa-chart-bar'></i> Stats</a> " +
				       
				       " </div>" +
				       "   </div> "+
				       "   <div class='card-footer text-muted'> "+
				       "	  Bets until: " + g.bet_until + " (fee:" + g.fee + " %)" +
				       "    </div>"+
				       "</div></div>" );

		// update rewards for each game
                (function() {
                   var g = result.rows[i];
  	           eos.getTableRows({
		      "json": true,
		      "scope": contract_account,
		      "code": contract_account,
		      "table": "bet",
		      "limit": 10000,
	           }).then(result => {
                      var sum = 0.0;
                      for (var i in result.rows) {
                         if(result.rows[i].idgame == g.id) {
                            sum += parseFloat(format.parseAsset(result.rows[i].value).amount)
                         }
                      }
                      
                      if(parseFloat(format.parseAsset(g.rewards_min).amount) > sum) {
                         $("#rewards" + g.id).html(" (Game prize: <strong>" + g.rewards_min + "</strong>)"); 
                      } else {
                         $("#rewards" + g.id).html(" (Game prize: " + format.DecimalPad(sum,4) + " EOS)"); 
                      } 
                   });
                })();
	    };
	    
	    hideJustBetGame();
	    updatePanels();
            $(".st-closed").hide();
	}).catch(function(exception) {
	    if (exception) {
		alert(exception);
	    }
	});
    }

    function bet(idgame) {
	var amount = format.DecimalUnimply($("#valbet" + idgame).html() * 10000, 4) + " EOS";
	var sc1 = $("#oscore"+idgame).val();
	var sc2 = $("#tscore"+idgame).val();
	
	transfer(contract_account, amount, "" + idgame + "," + sc1 + "," + sc2)
	    .then(result => {
		console.log(result);
		hideJustBetGame();
	    })
	    .catch(err => {
                var d = JSON.parse(err);
                var msg = d.error.details[0].message;
                console.log(msg);

                $("#msgContent").html(msg);
                $("#msg").modal();
	    });
    }

    function hideJustBetGame() {
	if (current_account != null) {
	    $(".btn-bet").show();
	    
	    p  = current_account;
	    eos.getTableRows({
		"json": true,
		"scope": contract_account,
		"code": contract_account,
		"table": "bet",
		"limit": 10000,
	    }).then(result => {
		console.log("BETS");
		console.log(result);
		
		for (var i in result.rows) {
		    var bet = result.rows[i];
		    if (p != bet.player)
			continue;
		    
		    $("#tobet" + bet.idgame).html(
			"<p><b>Bet at: </b>" + bet.created_at + "</p>" +
			    "<p><b>My score:</b> " + bet.score1 + "X" + bet.score2 + " - <b>Bet:</b> " + bet.value + "</p>" + 
                            ///"<a class='btn btn-primary btn-lg btn-bet' href='javascript:bet(" + bet.idgame + ");' role='button'><i class='fas fa-trophy'></i> +Bet</a> " +
			    "<a class='btn btn-info btn-lg' href='javascript:showStats(" + bet.idgame + ");' role='button'><i class='fas fa-chart-bar'></i> Stats</a> ");
		}
		
		adjustIFrameHeight(document.body.scrollHeight);
	    }).catch(function(exception) {
		if (exception) {
		    alert(exception);
		}
	    });
	}
    }

    function updatePanels() {
	if (current_account != null) {
	    p  = current_account;
	    eos = getEOSFromAdapter();
	    
	    eos.getCurrencyBalance("eosio.token", p)
		.then(result => {
		    console.log(result);
		    $("#mybalance").html(p + " | balance: " + result[0]);
		});
	    
	    eos.getTableRows({
		"json": true,
		"scope": contract_account,
		"code": contract_account,
		"table": "player",
		"limit": 10,
		"lower_bound": p,
	    }).then(result => {
		console.log("CLAIM");
		console.log(result);
		
		if (result.rows.length == 0) {
		    $("#divclaim").hide();
		} else {
                    if(result.rows[0].id != p)
                       return;

		    $("#toclaim").html(result.rows[0].eos_balance);
		    $("#divclaim").show();
		}
	    }).catch(function(exception) {
		if (exception) {
		    alert(exception);
		}
	    });
	}	
    }
    
function claim() {
	console.log("claim");
	if (current_account != null) {
		p  = current_account;
		eos = getEOSFromAdapter();

		console.log(p);

		signAndPush({
			account: 'ctgbarbeting',
			name: 'claim',
			authorization: [{
				actor: p,
				permission: 'active'
			}],
			data: { name: p }
		})
			.then(result => {
				console.log(result);
				updatePanels();
				hideJustBetGame();
			})
			.catch(exception => {
				alert("Claim error");
			});
	}
}
    
    function showStats(id) {
	openLink("http://www.portofirme.top:18000/game/" + id, '_blank');
    }    
  </script>
  
</html>
